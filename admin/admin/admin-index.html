<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Qu·∫£n l√≠ b√°n h√†ng</title>
    <!-- <style></style> -->
    <link rel="stylesheet" href="admin-index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <img src="../img/icon/logo.png" alt="logo" />
      </div>

      <div class="menu">
        <ul>
          <li class="menu-item" onclick="showSection('customers', this)">
            Ng∆∞·ªùi d√πng
          </li>
          <li class="menu-item" onclick="showSection('category', this)">
            Lo·∫°i s·∫£n ph·∫©m
          </li>
          <li class="menu-item" onclick="showSection('products', this)">
            Danh m·ª•c s·∫£n ph·∫©m
          </li>
          <li class="menu-item" onclick="showSection('import', this)">
            Nh·∫≠p s·∫£n ph·∫©m
          </li>
          <li class="menu-item" onclick="showSection('prices', this)">
            Gi√° b√°n
          </li>
          <li class="menu-item" onclick="showSection('order', this)">
            ƒê∆°n ƒë·∫∑t h√†ng
          </li>
          <li class="menu-item" onclick="showSection('inventory', this)">
            S·ªë l∆∞·ª£ng t·ªìn
          </li>
        </ul>
        <div class="logout-box" onclick="logoutAdmin()">
          <i class="fa-solid fa-right-from-bracket"></i>
          <span> ƒêƒÉng xu·∫•t </span>
        </div>
      </div>
    </div>
    <div class="main">
      <!-- Admin-Category -->
      <div class="section" id="category" style="display: none">
        <div class="header"><h2>Danh s√°ch lo·∫°i s·∫£n ph·∫©m</h2></div>
        <div class="muted">Th√™m s·ª≠a x√≥a lo·∫°i s·∫£n ph·∫©m</div>

        <div
          style="margin: 15px 0; display: flex; gap: 10px; align-items: center"
        >
          <input
            type="text"
            id="search-category"
            placeholder="üîç T√¨m ki·∫øm lo·∫°i s·∫£n ph·∫©m..."
            oninput="searchCategories()"
            style="
              flex: 1;
              padding: 10px;
              border: 1px solid #ffb5c1;
              border-radius: 5px;
              font-size: 15px;
            "
          />
          <button class="button" id="add-type" onclick="showAddForm()">
            Th√™m lo·∫°i s·∫£n ph·∫©m
          </button>
        </div>

        <!-- Form th√™m lo·∫°i s·∫£n ph·∫©m -->
        <div
          class="form-box"
          id="form-add"
          style="display: none; margin-bottom: 15px"
        >
          <input type="text" id="new-type" placeholder="Nh·∫≠p lo·∫°i b√°nh..." />
          <div class="form-buttons">
            <button class="button" onclick="saveAdd()">L∆∞u</button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>

        <!-- Form s·ª≠a lo·∫°i s·∫£n ph·∫©m -->
        <div
          class="form-box"
          id="form-edit"
          style="display: none; margin-bottom: 15px"
        >
          <input
            type="text"
            id="edit-type"
            placeholder="Nh·∫≠p lo·∫°i b√°nh c·∫ßn s·ª≠a..."
          />
          <div class="form-buttons">
            <button class="button" onclick="saveEdit()">L∆∞u</button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>

        <!-- Form x√≥a lo·∫°i s·∫£n ph·∫©m -->
        <div
          class="form-box"
          id="form-delete"
          style="display: none; margin-bottom: 15px"
        >
          <h3>X√≥a lo·∫°i s·∫£n ph·∫©m</h3>
          <p>B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a lo·∫°i s·∫£n ph·∫©m n√†y?</p>
          <div class="form-buttons">
            <button class="button" onclick="confirmDelete()">X√≥a</button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>
        <!-- B·∫£ng lo·∫°i s·∫£n ph·∫©m -->
        <table id="table-type">
          <thead>
            <tr>
              <th>STT</th>
              <th>LO·∫†I B√ÅNH</th>
              <th>TR·∫†NG TH√ÅI</th>
              <th colspan="3">THAO T√ÅC</th>
            </tr>
          </thead>
          <tbody class="type-list"></tbody>
        </table>
      </div>

      <!-- Admin-Product-List -->
      <div class="section" id="products" style="display: none">
        <div class="header"><h2>Danh s√°ch s·∫£n ph·∫©m</h2></div>
        <div class="muted">Th√™m s·ª≠a x√≥a danh m·ª•c s·∫£n ph·∫©m</div>

        <div
          style="margin: 15px 0; display: flex; gap: 10px; align-items: center"
        >
          <input
            type="text"
            id="search-product"
            placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m (theo t√™n, m√£, lo·∫°i)..."
            oninput="searchProducts()"
            style="
              flex: 1;
              padding: 10px;
              border: 1px solid #ffb5c1;
              border-radius: 5px;
              font-size: 15px;
            "
          />
          <button class="button" id="add-product" onclick="showAddProduct()">
            Th√™m s·∫£n ph·∫©m
          </button>
        </div>

        <!-- Form th√™m s·∫£n ph·∫©m -->
        <div
          class="form-box"
          id="form-add-product"
          style="display: none; margin-bottom: 15px"
        >
          <!-- <input
            type="text"
            id="new-product-type"
            placeholder="Nh·∫≠p lo·∫°i b√°nh..."
          /> -->
          <select id="new-product-type">
            <option value="">-- Ch·ªçn lo·∫°i s·∫£n ph·∫©m --</option>
          </select>
          <input
            type="text"
            id="new-product-id"
            placeholder="Nh·∫≠p m√£ b√°nh..."
          />
          <input
            type="text"
            id="new-product-name"
            placeholder="Nh·∫≠p t√™n b√°nh..."
          />
          <input
            type="number"
            id="new-product-amount"
            placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng t·ªìn..."
          />
          <input
            type="text"
            id="new-product-describe"
            placeholder="Nh·∫≠p m√¥ t·∫£..."
          />
          <div style="margin: 10px 0">
            <label style="display: block; margin-bottom: 5px">H√¨nh ·∫£nh:</label>
            <input
              type="file"
              id="new-product-img-file"
              accept="image/*"
              style="margin-bottom: 5px"
            />
            <span
              style="
                display: block;
                margin: 5px 0;
                font-size: 14px;
                color: #666;
              "
              >ho·∫∑c</span
            >
            <input
              type="text"
              id="new-product-img"
              placeholder="Nh·∫≠p ƒë∆∞·ªùng d·∫´n h√¨nh ·∫£nh..."
            />
          </div>

          <div class="form-buttons">
            <button class="button" onclick="saveAddProduct()">L∆∞u</button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>

        <!-- Form s·ª≠a s·∫£n ph·∫©m -->
        <div
          class="form-box"
          id="form-edit-product"
          style="display: none; margin-bottom: 15px"
        >
          <select id="edit-product-type">
            <option value="">-- Ch·ªçn lo·∫°i s·∫£n ph·∫©m --</option>
          </select>
          <input
            type="text"
            id="edit-product-id"
            placeholder="Nh·∫≠p m√£ b√°nh c·∫ßn s·ª≠a..."
          />
          <input
            type="text"
            id="edit-product-name"
            placeholder="Nh·∫≠p t√™n b√°nh c·∫ßn s·ª≠a..."
          />
          <input
            type="number"
            id="edit-product-amount"
            placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng t·ªìn..."
          />
          <input
            type="text"
            id="edit-product-describe"
            placeholder="Nh·∫≠p m√¥ t·∫£ c·∫ßn s·ª≠a..."
          />
          <div style="margin: 10px 0">
            <label style="display: block; margin-bottom: 5px">H√¨nh ·∫£nh:</label>
            <input
              type="file"
              id="edit-product-img-file"
              accept="image/*"
              style="margin-bottom: 5px"
            />
            <span
              style="
                display: block;
                margin: 5px 0;
                font-size: 14px;
                color: #666;
              "
              >ho·∫∑c</span
            >
            <input
              type="text"
              id="edit-product-img"
              placeholder="Nh·∫≠p ƒë∆∞·ªùng d·∫´n h√¨nh ·∫£nh c·∫ßn s·ª≠a..."
            />
            <div id="edit-product-img-preview" style="margin-top: 10px"></div>
          </div>
          <div class="form-buttons">
            <button class="button" onclick="saveEditProduct()">L∆∞u</button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>

        <!-- Form x√≥a s·∫£n ph·∫©m -->
        <div
          class="form-box"
          id="form-delete-product"
          style="display: none; margin-bottom: 15px"
        >
          <h3>X√≥a lo·∫°i s·∫£n ph·∫©m</h3>
          <p>B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a lo·∫°i s·∫£n ph·∫©m n√†y?</p>
          <div class="form-buttons">
            <button class="button" onclick="confirmDeleteProduct()">X√≥a</button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>
        <!-- B·∫£ng s·∫£n ph·∫©m -->
        <table id="table-product">
          <thead>
            <tr>
              <th>STT</th>
              <th>LO·∫†I B√ÅNH</th>
              <th>M√É B√ÅNH</th>
              <th>T√äN B√ÅNH</th>
              <th>S·ªê L∆Ø·ª¢NG T·ªíN</th>
              <th>M√î T·∫¢</th>
              <th>H√åNH ·∫¢NH</th>
              <th colspan="2">THAO T√ÅC</th>
            </tr>
          </thead>
          <tbody class="product-list"></tbody>
        </table>
      </div>

      <!-- Admin-Price -->
      <div class="section" id="prices" style="display: none">
        <div class="header"><h2>Gi√° B√°n S·∫£n Ph·∫©m</h2></div>
        <div class="muted">Tra c·ª©u gi√° v·ªën, % l·ª£i nhu·∫≠n, gi√° b√°n</div>

        <div
          class="filter"
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
          "
        >
          <div>
            <label for="search-price-name">T√¨m theo t√™n: </label>
            <input
              type="text"
              id="search-price-name"
              placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..."
              oninput="filterPrice()"
            />
          </div>

          <div>
            <label for="filter-prime">Gi√° v·ªën: </label>
            <select id="filter-prime" onchange="filterPrice()">
              <option value="">T·∫•t c·∫£</option>
              <option value="0-50000">D∆∞·ªõi 50.000ƒë</option>
              <option value="50000-100000">50.000ƒë - 100.000ƒë</option>
              <option value="100000-200000">100.000ƒë - 200.000ƒë</option>
              <option value="200000-999999999">Tr√™n 200.000ƒë</option>
            </select>
          </div>

          <div>
            <label for="filter-profit">L·ª£i nhu·∫≠n: </label>
            <select id="filter-profit" onchange="filterPrice()">
              <option value="">T·∫•t c·∫£</option>
              <option value="0-20">D∆∞·ªõi 20%</option>
              <option value="20-40">20% - 40%</option>
              <option value="40-60">40% - 60%</option>
              <option value="60-999">Tr√™n 60%</option>
            </select>
          </div>

          <div>
            <label for="filter-sale">Gi√° b√°n: </label>
            <select id="filter-sale" onchange="filterPrice()">
              <option value="">T·∫•t c·∫£</option>
              <option value="0-100000">D∆∞·ªõi 100.000ƒë</option>
              <option value="100000-200000">100.000ƒë - 200.000ƒë</option>
              <option value="200000-300000">200.000ƒë - 300.000ƒë</option>
              <option value="300000-999999999">Tr√™n 300.000ƒë</option>
            </select>
          </div>
        </div>

        <!-- Form nh·∫≠p l·ª£i nhu·∫≠n -->
        <div
          class="form-box"
          id="form-new-price"
          style="display: none; margin-bottom: 15px"
        >
          <input
            type="text"
            id="new-price-prime"
            placeholder="Nh·∫≠p gi√° v·ªën..."
          />
          <input
            type="text"
            id="new-price-profit"
            placeholder="Nh·∫≠p l·ª£i nhu·∫≠n..."
          />

          <div class="form-buttons">
            <button class="button" onclick="saveNewPrice()">L∆∞u</button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>

        <!-- Form s·ª≠a l·ª£i nhu·∫≠n -->
        <div
          class="form-box"
          id="form-edit-profit"
          style="display: none; margin-bottom: 15px"
        >
          <input
            type="text"
            id="edit-price-prime"
            placeholder="S·ª≠a l·∫°i gi√° v·ªën..."
          />
          <input
            type="text"
            id="edit-price-profit"
            placeholder="S·ª≠a l·∫°i l·ª£i nhu·∫≠n..."
          />

          <div class="form-buttons">
            <button class="button" onclick="saveEditPrice()">L∆∞u</button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>

        <!-- form x√≥a l·ª£i nhu·∫≠n -->
        <div
          class="form-box"
          id="form-delete-prices"
          style="display: none; margin-bottom: 15px"
        >
          <h3>X√≥a Gi√° B√°n</h3>
        </div>

        <table id="table-price">
          <thead>
            <tr>
              <th>STT</th>
              <th>T√äN B√ÅNH</th>
              <th>LO·∫†I B√ÅNH</th>
              <th>GI√Å V·ªêN (VNƒê)</th>
              <th>% L·ª¢I NHU·∫¨N</th>
              <th>GI√Å B√ÅN (VNƒê)</th>
              <th>THAO T√ÅC</th>
            </tr>
          </thead>
          <tbody class="price-list"></tbody>
        </table>
      </div>

      <div id="import" class="section" style="display: none">
        <h2>Qu·∫£n L√Ω Phi·∫øu Nh·∫≠p H√†ng üìù</h2>

        <div class="filter">
          <input
            type="text"
            placeholder="T√¨m M√£ Phi·∫øu..."
            id="search-import-id"
          />
          <select id="filter-import-status">
            <option value="">--T·∫•t C·∫£ Tr·∫°ng Th√°i--</option>
            <option value="draft">Ch∆∞a Ho√†n Th√†nh</option>
            <option value="complete">ƒê√£ Ho√†n Th√†nh</option>
          </select>
          <button class="button" onclick="searchImport()">
            <i class="fas fa-search"></i> T√¨m Ki·∫øm
          </button>
          <button class="button" onclick="showAddImportForm()">
            <i class="fas fa-plus"></i> Th√™m Phi·∫øu Nh·∫≠p M·ªõi
          </button>
        </div>

        <table class="data-table" id="import-table">
          <thead>
            <tr>
              <th>M√£ Phi·∫øu</th>
              <th>Ng√†y Nh·∫≠p</th>
              <th>T·ªïng Gi√° Tr·ªã</th>
              <th>Tr·∫°ng Th√°i</th>
              <th>H√†nh ƒê·ªông</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="section-import-form" class="section" style="display: none">
        <h3 id="import-form-title">Th√™m Phi·∫øu Nh·∫≠p M·ªõi</h3>

        <div class="form-group">
          <label for="import-date">Ng√†y Nh·∫≠p:</label>
          <input type="date" id="import-date" value="2025-10-26" />
        </div>

        <h4>Chi Ti·∫øt S·∫£n Ph·∫©m Nh·∫≠p</h4>
        <div id="import-items-list"></div>
        <button class="button" onclick="addImportItemRow()">
          <i class="fas fa-cart-plus"></i> Th√™m S·∫£n Ph·∫©m Kh√°c
        </button>

        <div class="form-group" style="margin-top: 20px">
          <strong
            >T·ªïng Gi√° Tr·ªã Phi·∫øu: <span id="import-total">0</span> VNƒê</strong
          >
        </div>

        <button class="button" id="save-import-btn" onclick="saveImport(false)">
          <i class="fas fa-save"></i> L∆∞u (Ch∆∞a Ho√†n Th√†nh)
        </button>
        <button
          class="button"
          id="complete-import-btn"
          onclick="saveImport(true)"
        >
          <i class="fas fa-check"></i> Ho√†n Th√†nh Phi·∫øu
        </button>
        <button class="button-cancel" onclick="showSection('section-import')">
          <i class="fas fa-times"></i> H·ªßy/Quay L·∫°i
        </button>
      </div>

      <div id="order" class="section" style="display: none">
        <h2>Qu·∫£n L√Ω ƒê∆°n ƒê·∫∑t H√†ng üéÄ</h2>

        <div class="filter">
          <input type="date" id="filter-order-start-date" />
          <span style="margin: 0 5px">ƒë·∫øn</span>
          <input type="date" id="filter-order-end-date" />
          <select id="filter-order-status">
            <option value="">--T·∫•t C·∫£ T√¨nh Tr·∫°ng--</option>
            <option value="Ch·ªù x√°c nh·∫≠n">Ch·ªù x√°c nh·∫≠n</option>
            <option value="ƒêang x·ª≠ l√Ω">ƒêang x·ª≠ l√Ω</option>
            <option value="ƒê√£ giao h√†ng">ƒê√£ giao h√†ng</option>
            <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
          </select>
          <button class="button" onclick="searchOrders()">
            <i class="fas fa-search"></i> Tra C·ª©u ƒê∆°n
          </button>
        </div>

        <table class="data-table" id="order-table">
          <thead>
            <tr>
              <th>M√£ ƒê∆°n</th>
              <th>Ng√†y ƒê·∫∑t</th>
              <th>Kh√°ch H√†ng</th>
              <th>T·ªïng Ti·ªÅn</th>
              <th>T√¨nh Tr·∫°ng</th>
              <th>H√†nh ƒê·ªông</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="order-detail" class="section" style="display: none">
        <h3 id="order-detail-title">Chi Ti·∫øt ƒê∆°n H√†ng #</h3>

        <div id="order-info"></div>

        <div class="form-group" style="margin-top: 30px">
          <strong>C·∫≠p Nh·∫≠t T√¨nh Tr·∫°ng ƒê∆°n:</strong>
          <span id="current-status" class="tag"></span>
          <div id="status-actions" style="margin-top: 10px"></div>
        </div>

        <button
          class="button"
          onclick="showSection('order')"
          style="margin-top: 20px"
        >
          <i class="fas fa-arrow-left"></i> Quay L·∫°i Danh S√°ch
        </button>
      </div>

      <div class="section" id="customers" style="display: none">
        <h2 class="header">Danh s√°ch kh√°ch h√†ng</h2>
        <div class="muted">Qu·∫£n L√≠ Th√¥ng Tin Kh√°ch H√†ng</div>
        <div class="filter">
          <label for="search-user">T√¨m Ki·∫øm Ng∆∞·ªùi D√πng</label>
          <input
            type="text"
            id="search-user"
            placeholder="Nh·∫≠p h·ªç t√™n,sdt..."
            oninput="filterUsers()"
          />
        </div>
        <table id="table-user">
          <thead>
            <tr>
              <th>STT</th>
              <th>T√™n Kh√°ch H√†ng</th>
              <th>Email</th>
              <th>SDT</th>
              <th>ƒê·ªãa ch·ªâ</th>
              <th>Tr·∫°ng th√°i</th>
              <th>Thao T√°c</th>
            </tr>
          </thead>
          <tbody class="user-list"></tbody>
        </table>
        <div class="form-box" id="form-reset-password" style="display: none">
          <h3>Reset m·∫≠t kh·∫©u</h3>
          <p>B·∫°n c√≥ ch·∫Øc mu·ªën reset m·∫≠t kh·∫©u cho kh√°ch h√†ng n√†y?</p>
          <div class="form-buttons">
            <button class="button" onclick="confirmResetPassword()">
              X√°c nh·∫≠n
            </button>
            <button class="button-cancel" onclick="hideForms()">H·ªßy</button>
          </div>
        </div>
      </div>

      <div class="section" id="inventory" style="display: none">
        <div class="inventory-search">
          <h3>üîç Tra c·ª©u t·ªìn kho theo s·∫£n ph·∫©m</h3>

          <label for="inventory-date">Ch·ªçn ng√†y:</label>
          <input type="date" id="inventory-date" class="input" />

          <label for="inventory-product">Ch·ªçn s·∫£n ph·∫©m:</label>
          <select id="inventory-product" class="input">
            <option value="">‚Äî‚Äî Ch·ªçn s·∫£n ph·∫©m ‚Äî‚Äî</option>
          </select>

          <button class="button" onclick="searchInventoryByProduct()">
            Tra c·ª©u
          </button>
          <div id="inventory-result" class="alert-box"></div>
        </div>

        <div class="inventory-warning">
          <h3>‚ö†Ô∏è C·∫£nh b√°o s·∫£n ph·∫©m s·∫Øp h·∫øt h√†ng</h3>
          <button class="button" onclick="checkLowStock()">
            Ki·ªÉm tra t·ªìn kho
          </button>
          <div id="low-stock-result" class="alert-box"></div>
        </div>

        <div class="inventory-summary">
          <h3>üìä Nh·∫≠p ‚Äì Xu·∫•t ‚Äì T·ªìn theo kho·∫£ng th·ªùi gian</h3>

          <label for="start-date">T·ª´ ng√†y:</label>
          <input type="date" id="start-date" class="input" />

          <label for="end-date">ƒê·∫øn ng√†y:</label>
          <input type="date" id="end-date" class="input" />

          <button class="button" onclick="summarizeInventory()">
            Xem th·ªëng k√™
          </button>
          <div id="summary-result" class="alert-box"></div>
        </div>
      </div>
    </div>

    <!-- Js -->
    <script src="admin-index.js"></script>
  </body>
</html>
